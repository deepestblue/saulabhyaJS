/* global QUnit:false */

import { brahmiyaToLatn, latnToBrahmiya } from "http://localhost:8000/src/script_changer.mjs";

const tamlData = {
    taml : [
        "роЕ роЖ роЗ роИ роЙ роК роО роП роР роТ роУ роФ роГ",
        "роХ роХро╛ роХро┐ роХрпА роХрпБ роХрпВ роХрпЖ роХрпЗ роХрпИ роХрпК роХрпЛ роХрпМ",
        "роХрпН роЩрпН роЪрпН роЮрпН роЯрпН рогрпН ро▒рпН ройрпН родрпН роирпН рокрпН роорпН ропрпН ро░рпН ро▓рпН ро╡рпН ро┤рпН ро│рпН",
        "роХ роЩ роЪ роЮ роЯ рог ро▒ рой род рои рок роо роп ро░ ро▓ ро╡ ро┤ ро│",
        "роЕроЕроХрпНроХрпН",
        "роХрпНроХ",
        "ро▓роЕ",
        "роЩроЮрпНроЯрпЛ",
        "роЕроК",
        "роЗроУроРроЕроУройро┐ро▒рпАройрпМро│роИроЕ",
    ],
    latn : [
        "a a╠Д i i╠Д u u╠Д e e╠Д ai o o╠Д au k╠▒",
        "ka ka╠Д ki ki╠Д ku ku╠Д ke ke╠Д kai ko ko╠Д kau",
        "k n╠З c n╠Г t╠г n╠г t╠▒ n╠▒ t n p m y r l╠▒ v r╠г l╠г",
        "ka n╠Зa ca n╠Гa t╠гa n╠гa t╠▒a n╠▒a ta na pa ma ya ra l╠▒a va r╠гa l╠гa",
        "aakk",
        "kka",
        "l╠▒aa",
        "n╠Зan╠Гt╠гo╠Д",
        "au╠Д",
        "io╠Дaiao╠Дn╠▒it╠▒i╠Дn╠▒aul╠гai╠Дa",
    ],
};

QUnit.module("родрооро┐ро┤рпН тЖТ Latin");
[...Array(tamlData.taml.length).keys()].forEach(function(i) {
    QUnit.test(tamlData.taml[i], function(assert) {
        assert.deepEqual(
            brahmiyaToLatn("taml", tamlData.taml[i]),
            tamlData.latn[i]);
    });
});

QUnit.module("Latin тЖТ родрооро┐ро┤рпН");
[...Array(tamlData.latn.length).keys()].forEach(function(i) {
    QUnit.test(tamlData.latn[i], function(assert) {
        assert.deepEqual(
            latnToBrahmiya("taml", tamlData.latn[i]),
            tamlData.taml[i]);
    });
});

const teluData = {
    telu : [
        "р░Е р░Ж р░З р░И р░Й р░К р░О р░П р░Р р░Т р░У р░Ф",
        "р░Х р░Хр░╛ р░Хр░┐ р░Хр▒А р░Хр▒Б р░Хр▒В р░Хр▒Ж р░Хр▒З р░Хр▒И р░Хр▒К р░Хр▒Л р░Хр▒М",
        "р░Хр▒Н р░Щр▒Н р░Ър▒Н р░Юр▒Н р░Яр▒Н р░гр▒Н р░▒р▒Н р░йр▒Н р░др▒Н р░ир▒Н р░кр▒Н р░ор▒Н р░пр▒Н р░░р▒Н р░▓р▒Н р░╡р▒Н р░┤р▒Н р░│р▒Н",
        "р░Х р░Щ р░Ъ р░Ю р░Я р░г р░▒ р░й р░д р░и р░к р░о р░п р░░ р░▓ р░╡ р░┤ р░│",
    ],
    latn : [
        "a a╠Д i i╠Д u u╠Д e e╠Д ai o o╠Д au",
        "ka ka╠Д ki ki╠Д ku ku╠Д ke ke╠Д kai ko ko╠Д kau",
        "k n╠З c n╠Г t╠г n╠г t╠▒ n╠▒ t n p m y r l╠▒ v r╠г l╠г",
        "ka n╠Зa ca n╠Гa t╠гa n╠гa t╠▒a n╠▒a ta na pa ma ya ra l╠▒a va r╠гa l╠гa",
    ],
};

QUnit.module("р░др▒Жр░▓р▒Бр░Чр▒Б тЖТ Latin");
[...Array(teluData.telu.length).keys()].forEach(function(i) {
    QUnit.test(teluData.telu[i], function(assert) {
        assert.deepEqual(
            brahmiyaToLatn("telu", teluData.telu[i]),
            teluData.latn[i]);
    });
});

QUnit.module("Latin тЖТ р░др▒Жр░▓р▒Бр░Чр▒Б");
[...Array(teluData.latn.length).keys()].forEach(function(i) {
    QUnit.test(teluData.latn[i], function(assert) {
        assert.deepEqual(
            latnToBrahmiya("telu", teluData.latn[i]),
            teluData.telu[i]);
    });
});

const devaData = {
    deva : [
        "рдЕ рдЖ рдЗ рдИ рдЙ рдК рдЛ реа рдМ реб рдП рдР рдУ рдФ рдЕрдВ рдЕрдБ рдЕрдГ",
        "рдХ рдХрд╛ рдХрд┐ рдХреА рдХреБ рдХреВ рдХреГ рдХреД рдХрев рдХрег рдХреЗ рдХреИ рдХреЛ рдХреМ рдХрдВ рдХрдБ рдХрдГ",
        "рдХреН рдЦреН рдЧреН рдШреН рдЩреН рдЪреН рдЫреН рдЬреН рдЭреН рдЮреН рдЯреН рдареН рдбреН рдвреН рдгреН рддреН рдереН рджреН рдзреН рдиреН рдкреН рдлреН рдмреН рднреН рдореН рдпреН рд░реН рд▓реН рд│реН рд╡реН рд╢реН рд╖реН рд╕реН рд╣реН",
        "рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд│ рд╡ рд╢ рд╖ рд╕ рд╣",
        "рдХрд╛ рдЦрд╛ рдЧрд╛ рдШрд╛ рдЩрд╛ рдЪрд╛ рдЫрд╛ рдЬрд╛ рдЭрд╛ рдЮрд╛ рдЯрд╛ рдард╛ рдбрд╛ рдврд╛ рдгрд╛ рддрд╛ рдерд╛ рджрд╛ рдзрд╛ рдирд╛ рдкрд╛ рдлрд╛ рдмрд╛ рднрд╛ рдорд╛ рдпрд╛ рд░рд╛ рд▓рд╛ рд│рд╛ рд╡рд╛ рд╢рд╛ рд╖рд╛ рд╕рд╛ рд╣рд╛",
        "рдЕрдЕрдХреНрдХреН",
        "рдХреНрдХ",
        "рд▓рдЕ",
        "рдЩрдЮреНрдЯреЛ",
        "рдЕрдК",
        "рдЗрдУрдРрдЕрдУрдирд┐рддреАрдиреМрд│рдИрдЕ",
        "рдЕрдЧреНрдГ",
        "рдмреНрд╣рдгреНрд╣рдкрдЗрдЪреНрд╣рдЙрдЕрдЗрдЕрдУ",
    ],
    latn : [
        "a a╠Д i i╠Д u u╠Д r╠е r╠е╠Д l╠е l╠е╠Д e╠Д ai o╠Д au am╠З am╠Р ah╠г",
        "ka ka╠Д ki ki╠Д ku ku╠Д kr╠е kr╠е╠Д kl╠е kl╠е╠Д ke╠Д kai ko╠Д kau kam╠З kam╠Р kah╠г",
        "k kh g gh n╠З c ch j jh n╠Г t╠г t╠гh d╠г d╠гh n╠г t th d dh n p ph b bh m y r l l╠г v s╠Б s╠г s h",
        "ka kha ga gha n╠Зa ca cha ja jha n╠Гa t╠гa t╠гha d╠гa d╠гha n╠гa ta tha da dha na pa pha ba bha ma ya ra la l╠гa va s╠Бa s╠гa sa ha",
        "ka╠Д kha╠Д ga╠Д gha╠Д n╠Зa╠Д ca╠Д cha╠Д ja╠Д jha╠Д n╠Гa╠Д t╠гa╠Д t╠гha╠Д d╠гa╠Д d╠гha╠Д n╠гa╠Д ta╠Д tha╠Д da╠Д dha╠Д na╠Д pa╠Д pha╠Д ba╠Д bha╠Д ma╠Д ya╠Д ra╠Д la╠Д l╠гa╠Д va╠Д s╠Бa╠Д s╠гa╠Д sa╠Д ha╠Д",
        "aakk",
        "kka",
        "laa",
        "n╠Зan╠Гt╠гo╠Д",
        "au╠Д",
        "io╠Дaiao╠Дniti╠Дnaul╠гai╠Дa",
        "agh╠г",
        "b:han╠гhapa:ic:ha:ua:iao╠Д",
    ],
};

QUnit.module("рджреЗрд╡рдирд╛рдЧрд░реА тЖТ Latin");
[...Array(devaData.deva.length).keys()].forEach(function(i) {
    QUnit.test(devaData.deva[i], function(assert) {
        assert.deepEqual(
            brahmiyaToLatn("deva", devaData.deva[i], false),
            devaData.latn[i]);
    });
});

QUnit.module("Latin тЖТ рджреЗрд╡рдирд╛рдЧрд░реА");
[...Array(devaData.latn.length).keys()].forEach(function(i) {
    QUnit.test(devaData.latn[i], function(assert) {
        assert.deepEqual(
            latnToBrahmiya("deva", devaData.latn[i]),
            devaData.deva[i]);
    });
});

QUnit.module("Numbers");
const numData = {
    taml : [
        "рпж",
        "рпз рпи рпй рпк рпл рпм рпн рпо рпп",
        "рп░ рп▒",
        "рп▒рп░рпз рп▒рпкрп░рпз рпирп▒рп░рпй рппрп▒рпнрп░рпз рппрп▒рпорп░рпл",
        "рп▓",
        "рпирп▓рп░рпй",
        "рп░рп▓",
        "рп░рпзрп▓",
        "рпирп░рп▓рпй",
        "рп▓рп▓",
        "рп░рп▓рп▓",
        "рп░рпзрп▓рп▓рп▒рп░рпзрп▓рп▒рп░рпз",
        "рпирп░рп▓рп▓рп░рпй",
        "рпирп░рпйрп▓рп▓рпмрп▒рплрп░рп▓рплрп▒рпмрп░рпм",
        "рп▒рпирп░рпйрп▓рп▓рп▓рпкрп▒рплрп░рпмрп▓рп▓рпнрп▒рпорп░рппрп▓рпирп▒рпйрп░рпк",
    ],
    telu : [
        "р▒ж",
        "р▒з р▒и р▒й р▒к р▒л р▒м р▒н р▒о р▒п",
        "р▒зр▒ж р▒зр▒жр▒ж",
        "р▒зр▒зр▒з р▒зр▒кр▒з р▒ир▒зр▒й р▒пр▒нр▒з р▒пр▒ор▒л",
        "р▒зр▒жр▒жр▒ж",
        "р▒ир▒жр▒зр▒й",
        "р▒зр▒жр▒жр▒жр▒ж",
        "р▒зр▒зр▒жр▒жр▒ж",
        "р▒ир▒жр▒жр▒жр▒й",
        "р▒зр▒жр▒жр▒жр▒жр▒жр▒ж",
        "р▒зр▒жр▒жр▒жр▒жр▒жр▒жр▒ж",
        "р▒зр▒зр▒зр▒зр▒зр▒зр▒зр▒з",
        "р▒ир▒жр▒жр▒жр▒жр▒жр▒зр▒й",
        "р▒ир▒йр▒мр▒лр▒жр▒лр▒мр▒м",
        "р▒зр▒ир▒йр▒кр▒лр▒мр▒нр▒ор▒пр▒ир▒йр▒к",
    ],
    deva : [
        "реж",
        "рез реи рей рек рел рем рен рео реп",
        "резреж резрежреж",
        "резрезрез резрекрез реирезрей репренрез репреорел",
        "резрежрежреж",
        "реирежрезрей",
        "резрежрежрежреж",
        "резрезрежрежреж",
        "реирежрежрежрей",
        "резрежрежрежрежрежреж",
        "резрежрежрежрежрежрежреж",
        "резрезрезрезрезрезрезрез",
        "реирежрежрежрежрежрезрей",
        "реирейремрелрежрелремрем",
        "резреирейрекрелремренреорепреирейрек",
    ],
    latn : [
        "0",
        "1 2 3 4 5 6 7 8 9",
        "10 100",
        "111 141 213 971 985",
        "1000",
        "2013",
        "10000",
        "11000",
        "20003",
        "1000000",
        "10000000",
        "11111111",
        "20000013",
        "23650566",
        "123456789234",
    ],
};

[...Array(numData.latn.length).keys()].forEach(function(i) {
    QUnit.test("родрооро┐ро┤рпН " + numData.taml[i], function(assert) {
        assert.deepEqual(
            brahmiyaToLatn("taml", numData.taml[i]),
            numData.latn[i]);
        });
    QUnit.test(numData.latn[i] + " тЖТ родрооро┐ро┤рпН", function(assert) {
            assert.deepEqual(
            latnToBrahmiya("taml", numData.latn[i]),
            numData.taml[i]);
        });
    QUnit.test("р░др▒Жр░▓р▒Бр░Чр▒Б " + numData.telu[i], function(assert) {
        assert.deepEqual(
            brahmiyaToLatn("telu", numData.telu[i]),
            numData.latn[i]);
        });
    QUnit.test(numData.latn[i] + " тЖТ р░др▒Жр░▓р▒Бр░Чр▒Б", function(assert) {
        assert.deepEqual(
            latnToBrahmiya("telu", numData.latn[i]),
            numData.telu[i]);
        });
    QUnit.test("рджреЗрд╡рдирд╛рдЧрд░реА " + numData.deva[i], function(assert) {
        assert.deepEqual(
            brahmiyaToLatn("deva", numData.deva[i]),
            numData.latn[i]);
        });
    QUnit.test(numData.latn[i] + " тЖТ рджреЗрд╡рдирд╛рдЧрд░реА", function(assert) {
        assert.deepEqual(
            latnToBrahmiya("deva", numData.latn[i]),
            numData.deva[i]);
    });
});

QUnit.module("Tamil integration");
const tamilTextWithPunctuationAndSpacing = {
    taml : `
рокрпЖро░рпБроорпНрокро╛ро▓рпБроорпН роороХро░родрпНродро┐ро▓рпН роорпБроЯро┐ропрпБроорпН роЪрпКро▒рпНроХро│рпБроХрпНроХрпБ роЕродрпНродрпБроЪрпНроЪро╛ро░ро┐ропрпИ ро╡ро░рпБроорпН. рооро░родрпНродрпИ роирпЛроХрпНроХро┐ройрпЗройрпН. рокро┤родрпНродро┐ройродрпБ роЪрпБро╡рпИ. роЖропро┐ро░родрпНродро┐ро▓рпН роТро░рпБро╡ройрпН. роороХро░родрпНродро┐ро▓рпН роорпБроЯро┐ропрпБроорпН.

роЗро▓роХрпНроХрогроорпН рокропро┐ро▓рпБроорпНрокрпКро┤рпБродрпБ роОроЯрпНроЯрпБ ро╡рпЗро▒рпНро▒рпБроорпИропрпБро░рпБрокрпБроХро│рпН, роЕродро╛ро╡родрпБ роР роЖро▓рпН роУроЯрпБ роЙроЯройрпН роорпБродро▓ро┐ропрой, рокропро┐ройрпНро▒рпЗройрпН. роЪро┐ро▓ роЖрогрпНроЯро╛роХ ро╡роЯроорпКро┤ро┐ роХро▒рпНроХро┐ро▒рпЗройрпН. ро╡роЯроорпКро┤ро┐ропро┐ро▓рпБроорпН ро╡рпЗро▒рпНро▒рпБроорпИропрпБро░рпБрокрпБроХро│рпН роЙро│рпНро│рой. роорпКро┤ро┐ропрпИ ро╡ро┐ро│роХрпНроХ роЗро▓роХрпНроХрогроорпН роОройро┐ро▓рпН, ро╡роЯроорпКро┤ро┐ропро┐ро▓рпН рокрпЖропро░рпНроЪрпНроЪрпКро▒рпНроХро│рпИ ро╡ро┐ро│роХрпНроХ ро╡рпЗро▒рпНро▒рпБроорпИропрпБро░рпБрокрпБроХро│рпН роЗройрпНро▒ро┐ропроорпИропро╛родро╡рпИ. роЙро░рпИропро┐ро▓рпЛ роЪрпЖропрпНропрпБро│ро┐ро▓рпЛ рокрпЖропро░рпНроЪрпНроЪрпКро▓рпНро▓родрпБ роорпБроЯро┐ро╡ро┐ро▓рпН ро╡ро░рпБроорпН рокро┐ро▒рпНроЪрпЗро░рпНроХрпНроХрпИроХро│рпН роОроЯрпНроЯрпЗ. роЕро╡рпНро╡рпЖроЯрпНроЯродрпБ роорпВро▓роорпН рокрпЖропро░рпНроЪрпНроЪрпКро▓рпН роОро▓рпНро▓ро╛роорпЗ роОроЯрпНроЯро╛роХ ро╡рпЗро▒рпБрокроЯрпБроорпН. роЗрокрпНрокро┐ро▒рпНроЪрпЗро░рпНроХрпНроХрпИродро╛ройрпН ро╡рпЗро▒рпБрокро╛роЯрпНроЯродрпБ роЙро░рпБрокроХро│рпЖрой роХро░рпБродрокрпНрокроЯрпБроХро┐ройрпНро▒рой.

рпирп▒рпйро╡родрпБ рооройро┐родройрпН.

роХрпБро▒ро┐рокрпНрокро╛роХ, роЗро╡рпНро╡ро┐родро┐роорпБро▒рпИ рокрпЖропро░рпНроХро│рпБроХрпНроХрпБроорпН рокрпКро░рпБроирпНродрпБроорпН. роЗро░ро╛роороиро╛родрокрпБро░родрпНродрпИроЪрпН роЪрпЗро░рпНроирпНродро╡ро░рпН тАЬроЗро░ро╛роороиро╛родрокрпБро░родрпНродрпБроЪрпН роЪрпАройро┐ро╡ро╛роЪ роЕропрпНропроЩрпНроХро╛ро░рпНтАЭ. роороХро╛ро░ро╛роЪрокрпБро░родрпНродро┐ро▓рпН рокро┐ро▒роирпНродро╡ро░рпН тАЬроороХро╛ро░ро╛роЪрокрпБро░родрпНродрпБ ро╡ро┐роЪрпБро╡роиро╛род роЕропрпНропро░рпНтАЭ. роХрпБроорпНрокроХрпЛрогродрпНродро┐ро▓рпН ро╡ро╛ро┤рпНроирпНродро╡ро░рпН тАЬроХрпБроорпНрокроХрпЛрогродрпНродрпБ роЗро░ро╛роЪрооро╛рогро┐роХрпНроХроорпН рокро┐ро│рпНро│рпИтАЭ. рооро╛роорпНрокро▓родрпНродро┐ро▓рпН ро╡роЪро┐роХрпНроХрпБроорпН родро╛родрпНродро╛ тАЬрооро╛роорпНрокро▓родрпНродрпБродрпН родро╛родрпНродро╛тАЭ. рокро▓рпНро▓ро╛ро╡ро░родрпНродро┐ро▓рпН ро╡ро╛ро┤рпБроорпН рооро╛рооройрпН тАЬрокро▓рпНро▓ро╛ро╡ро░родрпНродрпБ рооро╛рооройрпНтАЭ.

роЪроирпНродроЯро┐ропрпЖройрпНро▒рпБ рооро▒роирпНродро╛ропрпЛ! роЗроЩрпНроХро┐ро▓рпНро▓рпИропрпЛ! роОродро▒рпНроХрпБ родропрпИ ро╡ро░ро╛родрпБроЯро╛? роЗро░ро╛роороЪрпНроЪроирпНродро┐ро░ро╛!
`,
    knda : `
р▓кр│Жр▓░р│Бр▓ор│Нр▓кр▓╛р▓▓р│Бр▓ор│Н р▓ор▓Хр▓░р▓др│Нр▓др▓┐р▓▓р│Н р▓ор│Бр▓Яр▓┐р▓пр│Бр▓ор│Н р▓Ър│Кр▓▒р│Нр▓Хр▓│р│Бр▓Хр│Нр▓Хр│Б р▓Ер▓др│Нр▓др│Бр▓Ър│Нр▓Ър▓╛р▓░р▓┐р▓пр│И р▓╡р▓░р│Бр▓ор│Н. р▓ор▓░р▓др│Нр▓др│И р▓ир│Лр▓Хр│Нр▓Хр▓┐р▓┤р│Зр▓┤р│Н. р▓кр│Юр▓др│Нр▓др▓┐р▓┤р▓др│Б р▓Ър│Бр▓╡р│И. р▓Жр▓пр▓┐р▓░р▓др│Нр▓др▓┐р▓▓р│Н р▓Тр▓░р│Бр▓╡р▓┤р│Н. р▓ор▓Хр▓░р▓др│Нр▓др▓┐р▓▓р│Н р▓ор│Бр▓Яр▓┐р▓пр│Бр▓ор│Н.

р▓Зр▓▓р▓Хр│Нр▓Хр▓гр▓ор│Н р▓кр▓пр▓┐р▓▓р│Бр▓ор│Нр▓кр│Кр│Юр│Бр▓др│Б р▓Ор▓Яр│Нр▓Яр│Б р▓╡р│Зр▓▒р│Нр▓▒р│Бр▓ор│Ир▓пр│Бр▓░р│Бр▓кр│Бр▓Хр▓│р│Н, р▓Ер▓др▓╛р▓╡р▓др│Б р▓Р р▓Жр▓▓р│Н р▓Ур▓Яр│Б р▓Йр▓Яр▓┤р│Н р▓ор│Бр▓др▓▓р▓┐р▓пр▓┤, р▓кр▓пр▓┐р▓┤р│Нр▓▒р│Зр▓┤р│Н. р▓Ър▓┐р▓▓ р▓Жр▓гр│Нр▓Яр▓╛р▓Х р▓╡р▓Яр▓ор│Кр│Юр▓┐ р▓Хр▓▒р│Нр▓Хр▓┐р▓▒р│Зр▓┤р│Н. р▓╡р▓Яр▓ор│Кр│Юр▓┐р▓пр▓┐р▓▓р│Бр▓ор│Н р▓╡р│Зр▓▒р│Нр▓▒р│Бр▓ор│Ир▓пр│Бр▓░р│Бр▓кр│Бр▓Хр▓│р│Н р▓Йр▓│р│Нр▓│р▓┤. р▓ор│Кр│Юр▓┐р▓пр│И р▓╡р▓┐р▓│р▓Хр│Нр▓Х р▓Зр▓▓р▓Хр│Нр▓Хр▓гр▓ор│Н р▓Ор▓┤р▓┐р▓▓р│Н, р▓╡р▓Яр▓ор│Кр│Юр▓┐р▓пр▓┐р▓▓р│Н р▓кр│Жр▓пр▓░р│Нр▓Ър│Нр▓Ър│Кр▓▒р│Нр▓Хр▓│р│И р▓╡р▓┐р▓│р▓Хр│Нр▓Х р▓╡р│Зр▓▒р│Нр▓▒р│Бр▓ор│Ир▓пр│Бр▓░р│Бр▓кр│Бр▓Хр▓│р│Н р▓Зр▓┤р│Нр▓▒р▓┐р▓пр▓ор│Ир▓пр▓╛р▓др▓╡р│И. р▓Йр▓░р│Ир▓пр▓┐р▓▓р│Л р▓Ър│Жр▓пр│Нр▓пр│Бр▓│р▓┐р▓▓р│Л р▓кр│Жр▓пр▓░р│Нр▓Ър│Нр▓Ър│Кр▓▓р│Нр▓▓р▓др│Б р▓ор│Бр▓Яр▓┐р▓╡р▓┐р▓▓р│Н р▓╡р▓░р│Бр▓ор│Н р▓кр▓┐р▓▒р│Нр▓Ър│Зр▓░р│Нр▓Хр│Нр▓Хр│Ир▓Хр▓│р│Н р▓Ор▓Яр│Нр▓Яр│З. р▓Ер▓╡р│Нр▓╡р│Жр▓Яр│Нр▓Яр▓др│Б р▓ор│Вр▓▓р▓ор│Н р▓кр│Жр▓пр▓░р│Нр▓Ър│Нр▓Ър│Кр▓▓р│Н р▓Ор▓▓р│Нр▓▓р▓╛р▓ор│З р▓Ор▓Яр│Нр▓Яр▓╛р▓Х р▓╡р│Зр▓▒р│Бр▓кр▓Яр│Бр▓ор│Н. р▓Зр▓кр│Нр▓кр▓┐р▓▒р│Нр▓Ър│Зр▓░р│Нр▓Хр│Нр▓Хр│Ир▓др▓╛р▓┤р│Н р▓╡р│Зр▓▒р│Бр▓кр▓╛р▓Яр│Нр▓Яр▓др│Б р▓Йр▓░р│Бр▓кр▓Хр▓│р│Жр▓┤ р▓Хр▓░р│Бр▓др▓кр│Нр▓кр▓Яр│Бр▓Хр▓┐р▓┤р│Нр▓▒р▓┤.

р│ир│жр│йр▓╡р▓др│Б р▓ор▓┤р▓┐р▓др▓┤р│Н.

р▓Хр│Бр▓▒р▓┐р▓кр│Нр▓кр▓╛р▓Х, р▓Зр▓╡р│Нр▓╡р▓┐р▓др▓┐р▓ор│Бр▓▒р│И р▓кр│Жр▓пр▓░р│Нр▓Хр▓│р│Бр▓Хр│Нр▓Хр│Бр▓ор│Н р▓кр│Кр▓░р│Бр▓ир│Нр▓др│Бр▓ор│Н. р▓Зр▓░р▓╛р▓ор▓ир▓╛р▓др▓кр│Бр▓░р▓др│Нр▓др│Ир▓Ър│Н р▓Ър│Зр▓░р│Нр▓ир│Нр▓др▓╡р▓░р│Н тАЬр▓Зр▓░р▓╛р▓ор▓ир▓╛р▓др▓кр│Бр▓░р▓др│Нр▓др│Бр▓Ър│Н р▓Ър│Ар▓┤р▓┐р▓╡р▓╛р▓Ъ р▓Ер▓пр│Нр▓пр▓Щр│Нр▓Хр▓╛р▓░р│НтАЭ. р▓ор▓Хр▓╛р▓░р▓╛р▓Ър▓кр│Бр▓░р▓др│Нр▓др▓┐р▓▓р│Н р▓кр▓┐р▓▒р▓ир│Нр▓др▓╡р▓░р│Н тАЬр▓ор▓Хр▓╛р▓░р▓╛р▓Ър▓кр│Бр▓░р▓др│Нр▓др│Б р▓╡р▓┐р▓Ър│Бр▓╡р▓ир▓╛р▓д р▓Ер▓пр│Нр▓пр▓░р│НтАЭ. р▓Хр│Бр▓ор│Нр▓кр▓Хр│Лр▓гр▓др│Нр▓др▓┐р▓▓р│Н р▓╡р▓╛р│Юр│Нр▓ир│Нр▓др▓╡р▓░р│Н тАЬр▓Хр│Бр▓ор│Нр▓кр▓Хр│Лр▓гр▓др│Нр▓др│Б р▓Зр▓░р▓╛р▓Ър▓ор▓╛р▓гр▓┐р▓Хр│Нр▓Хр▓ор│Н р▓кр▓┐р▓│р│Нр▓│р│ИтАЭ. р▓ор▓╛р▓ор│Нр▓кр▓▓р▓др│Нр▓др▓┐р▓▓р│Н р▓╡р▓Ър▓┐р▓Хр│Нр▓Хр│Бр▓ор│Н р▓др▓╛р▓др│Нр▓др▓╛ тАЬр▓ор▓╛р▓ор│Нр▓кр▓▓р▓др│Нр▓др│Бр▓др│Н р▓др▓╛р▓др│Нр▓др▓╛тАЭ. р▓кр▓▓р│Нр▓▓р▓╛р▓╡р▓░р▓др│Нр▓др▓┐р▓▓р│Н р▓╡р▓╛р│Юр│Бр▓ор│Н р▓ор▓╛р▓ор▓┤р│Н тАЬр▓кр▓▓р│Нр▓▓р▓╛р▓╡р▓░р▓др│Нр▓др│Б р▓ор▓╛р▓ор▓┤р│НтАЭ.

р▓Ър▓ир│Нр▓др▓Яр▓┐р▓пр│Жр▓┤р│Нр▓▒р│Б р▓ор▓▒р▓ир│Нр▓др▓╛р▓пр│Л! р▓Зр▓Щр│Нр▓Хр▓┐р▓▓р│Нр▓▓р│Ир▓пр│Л! р▓Ор▓др▓▒р│Нр▓Хр│Б р▓др▓пр│И р▓╡р▓░р▓╛р▓др│Бр▓Яр▓╛? р▓Зр▓░р▓╛р▓ор▓Ър│Нр▓Ър▓ир│Нр▓др▓┐р▓░р▓╛!
`,
    latn : `
perumpa╠Дl╠▒um makarattil╠▒ mut╠гiyum cot╠▒kal╠гukku attucca╠Дriyai varum. marattai no╠Дkkin╠▒e╠Дn╠▒. par╠гattin╠▒atu cuvai. a╠Дyirattil╠▒ oruvan╠▒. makarattil╠▒ mut╠гiyum.

il╠▒akkan╠гam payil╠▒umpor╠гutu et╠гt╠гu ve╠Дt╠▒t╠▒umaiyurupukal╠г, ata╠Дvatu ai a╠Дl╠▒ o╠Дt╠гu ut╠гan╠▒ mutal╠▒iyan╠▒a, payin╠▒t╠▒e╠Дn╠▒. cil╠▒a a╠Дn╠гt╠гa╠Дka vat╠гamor╠гi kat╠▒kit╠▒e╠Дn╠▒. vat╠гamor╠гiyil╠▒um ve╠Дt╠▒t╠▒umaiyurupukal╠г ul╠гl╠гan╠▒a. mor╠гiyai vil╠гakka il╠▒akkan╠гam en╠▒il╠▒, vat╠гamor╠гiyil╠▒ peyarccot╠▒kal╠гai vil╠гakka ve╠Дt╠▒t╠▒umaiyurupukal╠г in╠▒t╠▒iyamaiya╠Дtavai. uraiyil╠▒o╠Д ceyyul╠гil╠▒o╠Д peyarccol╠▒l╠▒atu mut╠гivil╠▒ varum pit╠▒ce╠Дrkkaikal╠г et╠гt╠гe╠Д. avvet╠гt╠гatu mu╠Дl╠▒am peyarccol╠▒ el╠▒l╠▒a╠Дme╠Д et╠гt╠гa╠Дka ve╠Дt╠▒upat╠гum. ippit╠▒ce╠Дrkkaita╠Дn╠▒ ve╠Дt╠▒upa╠Дt╠гt╠гatu urupakal╠гen╠▒a karutappat╠гukin╠▒t╠▒an╠▒a.

203vatu man╠▒itan╠▒.

kut╠▒ippa╠Дka, ivvitimut╠▒ai peyarkal╠гukkum poruntum. ira╠Дmana╠Дtapurattaic ce╠Дrntavar тАЬira╠Дmana╠Дtapurattuc ci╠Дn╠▒iva╠Дca ayyan╠Зka╠ДrтАЭ. maka╠Дra╠Дcapurattil╠▒ pit╠▒antavar тАЬmaka╠Дra╠Дcapurattu vicuvana╠Дta ayyarтАЭ. kumpako╠Дn╠гattil╠▒ va╠Дr╠гntavar тАЬkumpako╠Дn╠гattu ira╠Дcama╠Дn╠гikkam pil╠гl╠гaiтАЭ. ma╠Дmpal╠▒attil╠▒ vacikkum ta╠Дtta╠Д тАЬma╠Дmpal╠▒attut ta╠Дtta╠ДтАЭ. pal╠▒l╠▒a╠Дvarattil╠▒ va╠Дr╠гum ma╠Дman╠▒ тАЬpal╠▒l╠▒a╠Дvarattu ma╠Дman╠▒тАЭ.

cantat╠гiyen╠▒t╠▒u mat╠▒anta╠Дyo╠Д! in╠Зkil╠▒l╠▒aiyo╠Д! etat╠▒ku tayai vara╠Дtut╠гa╠Д? ira╠Дmaccantira╠Д!
`,};
QUnit.test("taml to latn: ta text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        brahmiyaToLatn("taml", tamilTextWithPunctuationAndSpacing.taml),
        tamilTextWithPunctuationAndSpacing.latn);
    });
QUnit.test("latn to taml: ta text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        latnToBrahmiya("taml", tamilTextWithPunctuationAndSpacing.latn),
        tamilTextWithPunctuationAndSpacing.taml);
    });
QUnit.test("taml to knda: ta text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        latnToBrahmiya("knda",
            brahmiyaToLatn("taml", tamilTextWithPunctuationAndSpacing.taml)),
        tamilTextWithPunctuationAndSpacing.knda);
    });
QUnit.test("knda to taml: ta text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        latnToBrahmiya("taml",
            brahmiyaToLatn("knda", tamilTextWithPunctuationAndSpacing.knda)),
        tamilTextWithPunctuationAndSpacing.taml);
    });

QUnit.module("Sanskrit integration");
const granthaTextWithPunctuationAndSpacing = {
    gran : `
ЁСМ▓ЁСНЗЁСМЦЁСНЗЁСМ╖ЁСНБ ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСМ╛ЁСМжЁСМ┐ЁСМдЁСМ░ЁСМ╛ ЁСМнЁСМ╛ЁСМ░ЁСМдЁСНАЁСМпЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМГ тАЬЁСМкЁСННЁСМ░ЁСМ╛ЁСМжЁСНЗЁСМ╢ЁСМ┐ЁСМХЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМГтАЭ тАЬЁСМкЁСННЁСМ░ЁСМ╛ЁСМиЁСННЁСМдЁСНАЁСМпЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМГтАЭ ЁСМЗЁСМдЁСННЁСМпЁСМнЁСМ┐ЁСМзЁСНАЁСМпЁСМиЁСННЁСМдЁСНЗ ред ЁСМЗЁСМдЁСННЁСМеЁСМВЁСМкЁСННЁСМ░ЁСМпЁСНЛЁСМЧЁСНЗЁСМг ЁСМ▓ЁСНЗЁСМЦЁСМХЁСМ╕ЁСННЁСМпЁСНЛЁСМжЁСННЁСМжЁСНЗЁСМ╢ЁСМ╛ЁСМ╕ЁСННЁСМдЁСННЁСМ░ЁСМпЁСНЛ ЁСМнЁСМ╛ЁСМ╕ЁСМиЁСННЁСМдЁСНЗ ред ЁСМкЁСННЁСМ░ЁСМеЁСМоЁСНЛ ЁСМпЁСМдЁСНН ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСМнЁСМ╛ЁСМ╖ЁСМ╛ ЁСМнЁСМ╛ЁСМ░ЁСМдЁСНАЁСМпЁСМ╛ЁСМиЁСМ╛ЁСМВ ЁСМнЁСМ╛ЁСМ░ЁСМдЁСМжЁСНЗЁСМ╢ЁСМ╕ЁСННЁСМп ЁСМЪ ЁСМ░ЁСМ╛ЁСМ╖ЁСННЁСМЯЁСННЁСМ░ЁСМнЁСМ╛ЁСМ╖ЁСМ╛ ЁСМкЁСНВЁСМ░ЁСННЁСМ╡ЁСМоЁСМ╛ЁСМ╕ЁСНАЁСМдЁСНН ЁСМ╕ЁСМ╛ЁСМоЁСННЁСМкЁСННЁСМ░ЁСМдЁСМВ ЁСМ╡ЁСМ░ЁСННЁСМдЁСМдЁСНЗ ЁСМ╢ЁСННЁСМ╡ЁСНЛ ЁСМ╡ЁСМ╛ ЁСМнЁСМ╡ЁСНЗЁСМдЁСНН ред ЁСМЕЁСМиЁСННЁСМп ЁСМЙЁСМжЁСННЁСМжЁСНЗЁСМ╢ЁСМГ ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСМ╛ЁСМжЁСНН ЁСМЗЁСМдЁСМ░ЁСМ╛ЁСМ╕ЁСМ╛ЁСМВ ЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМгЁСМ╛ЁСМоЁСНН ЁСМЕЁСМзЁСМ┐ЁСМХЁСМ╛ЁСМ░ЁСМГ ЁСМ╕ЁСННЁСМ╡ЁСМ╕ЁСННЁСМ╡ЁСМкЁСННЁСМ░ЁСМжЁСНЗЁСМ╢ЁСНЗЁСМ╖ЁСННЁСМ╡ЁСНЗЁСМ╡ЁСНЗЁСМдЁСМ┐ ред ЁСМдЁСНГЁСМдЁСНАЁСМп ЁСМЙЁСМжЁСННЁСМжЁСНЗЁСМ╢ЁСМ╛ЁСМ╕ЁСННЁСМдЁСНБ ЁСМЙЁСМХЁСННЁСМдЁСМ╛ЁСМнЁСННЁСМпЁСМ╛ЁСМВ ЁСМХЁСМ╛ЁСМ░ЁСМгЁСМ╛ЁСМнЁСННЁСМпЁСМ╛ЁСМВ ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСМнЁСМ╛ЁСМ╖ЁСМ╛ ЁСМнЁСМ╛ЁСМ░ЁСМдЁСНАЁСМпЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМ╕ЁСНБ ЁСМ╕ЁСМ░ЁСННЁСМ╡ЁСМкЁСННЁСМ░ЁСМеЁСМоЁСМ╛ ЁСМЪЁСНЗЁСМдЁСМ┐ ред

рпкрп░рплЁСМдЁСМоЁСМ╕ЁСННЁСМп ЁСМЕЁСМ╣ЁСНЛЁСМмЁСМ┐ЁСМ▓ЁСМоЁСМаЁСМ╛ЁСМзЁСНАЁСМ╢ЁСМ╕ЁСННЁСМп ЁСМзЁСННЁСМпЁСМ╛ЁСМиЁСМ╢ЁСННЁСМ▓ЁСНЛЁСМХЁСМГ
ЁСМХЁСМЯЁСМ╛ЁСМХЁСННЁСМ╖ЁСМГ ЁСМЕЁСМ╕ЁСННЁСМп ЁСМЕЁСМ╕ЁСННЁСМдЁСНАЁСМдЁСМ┐ ЁСМЗЁСМиЁСННЁСМиЁСМиЁСННЁСМдЁСМВ тАЬЁСМХЁСМЯЁСМ╛ЁСМХЁСННЁСМ╖ЁСНАтАЭ ред ЁСМ╕ЁСМоЁСННЁСМмЁСНБЁСМжЁСННЁСМзЁСНМ тАЬЁСМи ЁСМЩЁСМ┐ЁСМ╕ЁСМоЁСННЁСМмЁСНБЁСМжЁСННЁСМзЁСНМтАЭ ЁСМЗЁСМдЁСННЁСМпЁСМиЁСНЗЁСМи тАЬЁСМХЁСМЯЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ┐ЁСМиЁСННтАЭ ред ЁСМжЁСНЗЁСМ╡ЁСННЁСМпЁСМ╛ЁСМГ ЁСМ╕ЁСННЁСМдЁСННЁСМ░ЁСНАЁСМдЁСННЁСМ╡ЁСМ╛ЁСМдЁСНН тАЬЁСМЛЁСМиЁСННЁСМиЁСНЗЁСМнЁСННЁСМпЁСНЛ ЁСМЩЁСНАЁСМкЁСННтАЭ ЁСМЗЁСМдЁСННЁСМпЁСМдЁСМГ ЁСМгЁСМдЁСННЁСМ╡ЁСМ╛ЁСМЪЁСННЁСМЪ тАЬЁСМХЁСМЯЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ┐ЁСМгЁСНАтАЭ, ЁСМ╕ЁСМоЁСННЁСМмЁСНБЁСМжЁСННЁСМзЁСНМ тАЬЁСМПЁСМЩЁСННЁСМ╣ЁСННЁСМ░ЁСМ╕ЁСННЁСМ╡ЁСМ╛ЁСМдЁСННЁСМ╕ЁСМоЁСННЁСМмЁСНБЁСМжЁСННЁСМзЁСНЗЁСМГтАЭ ЁСМЗЁСМдЁСМ┐ ЁСМ╣ЁСННЁСМ░ЁСМ╕ЁСННЁСМ╡ЁСНЗЁСМХЁСМ╛ЁСМ░ЁСНЛ ЁСМ╡ЁСМ┐ЁСМ╣ЁСМ┐ЁСМдЁСМГ, ЁСМдЁСМдЁСМГ тАЬЁСМХЁСМЯЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ┐ЁСМгЁСМ┐тАЭ ЁСМЗЁСМдЁСМ┐ ЁСМ╡ЁСМ╛ЁСМЪЁСННЁСМпЁСМоЁСНН ред ЁСМдЁСМеЁСНИЁСМ╡ тАЬЁСМ╕ЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ┐ЁСМгЁСМ┐тАЭ ред тЖй

ЁСМЕЁСМеЁСМ╛ЁСМиЁСННЁСМпЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМгЁСМ╛ЁСМоЁСМзЁСМ┐ЁСМХЁСМ╛ЁСМ░ЁСМГ ЁСМ╕ЁСННЁСМ╡ЁСМкЁСННЁСМ░ЁСМжЁСНЗЁСМ╖ЁСННЁСМ╡ЁСНЗЁСМ╡ЁСНЛЁСМд ЁСМиЁСНЗЁСМдЁСМ┐ ред ЁСМРЁСМдЁСМ┐ЁСМ╣ЁСМ╛ЁСМ╕ЁСМ┐ЁСМХЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМ╢ЁСМ╛ЁСМ╕ЁСННЁСМдЁСННЁСМ░ЁСНЗ ЁСМиЁСМ┐ЁСМкЁСНБЁСМгЁСМ╛ ЁСМоЁСМиЁСННЁСМ╡ЁСМдЁСНЗ ЁСМпЁСМдЁСНН ЁСМкЁСННЁСМ░ЁСМеЁСМоЁСМжЁСННЁСМ░ЁСМ╛ЁСМоЁСМ┐ЁСМбЁСМнЁСМ╛ЁСМ╖ЁСМпЁСМ╛ ЁСМХЁСМпЁСМ╛ЁСМЪЁСМ┐ЁСМжЁСНЗЁСМ╡ ЁСМжЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ┐ЁСМгЁСМ╛ЁСМдЁСННЁСМпЁСНЗ ЁСМкЁСНБЁСМ░ЁСМ╛ ЁСМ╡ЁСННЁСМпЁСМ╛ЁСМ╣ЁСННЁСМ░ЁСМ┐ЁСМпЁСМдЁСНЗ ЁСМ╕ЁСННЁСМо ЁСМдЁСМ╕ЁСННЁСМпЁСМ╛ЁСМ╢ЁСННЁСМЪЁСМЪЁСННЁСМЫЁСМ╛ЁСМпЁСМ╛ ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСМоЁСМкЁСМ┐ ЁСМкЁСМдЁСМ┐ЁСМдЁСМ╛ ред тАЬЁСМоЁСНАЁСМитАЭ тАЬЁСМХЁСНБЁСМЯЁСНБЁСМоЁСННЁСМмтАЭ тАЬЁСМиЁСНАЁСМ░тАЭ ЁСМЗЁСМдЁСННЁСМпЁСМ╛ЁСМжЁСМпЁСМГ ЁСМ╢ЁСМмЁСННЁСМжЁСМ╛ЁСМГ ЁСМкЁСННЁСМ░ЁСМеЁСМоЁСМжЁСННЁСМ░ЁСМ╛ЁСМоЁСМ┐ЁСМбЁСМ╛ЁСМдЁСНН ЁСМ╕ЁСМЩЁСННЁСМЧЁСНГЁСМ╣ЁСНАЁСМдЁСМ╛ ЁСМЗЁСМдЁСМ┐ ЁСМ╕ЁСННЁСМкЁСМ╖ЁСННЁСМЯЁСМВ ЁСМпЁСМдЁСНЛ ЁСМжЁСННЁСМ░ЁСМ╛ЁСМоЁСМ┐ЁСМбЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМ╕ЁСНБ ЁСМдЁСМЪЁСННЁСМЫЁСМмЁСННЁСМжЁСНИЁСМГ ЁСМ╕ЁСМоЁСННЁСМмЁСМжЁСННЁСМзЁСМ╛ЁСМиЁСНАЁСМдЁСМ░ЁСМ╛ЁСМгЁСМ┐ ЁСМкЁСМжЁСМ╛ЁСМиЁСННЁСМпЁСМкЁСМ┐ ЁСМкЁСННЁСМ░ЁСМпЁСНБЁСМЬЁСННЁСМпЁСМиЁСННЁСМдЁСНЗ ЁСМпЁСНЗЁСМ╖ЁСМ╛ЁСМВ ЁСМ╡ЁСННЁСМпЁСМ╡ЁСМ╣ЁСМ╛ЁСМ░ЁСМГ ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСНЗ ЁСМиЁСМ╛ЁСМ╕ЁСННЁСМдЁСМ┐ ред ЁСМкЁСНБЁСМиЁСМ╢ЁСННЁСМЪ ЁСМжЁСННЁСМ░ЁСМ╛ЁСМоЁСМ┐ЁСМбЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМ╕ЁСНБ ЁСМХЁСМдЁСМ┐ЁСМкЁСМпЁСМ╛ЁСМ╕ЁСНБ ЁСМжЁСМиЁСННЁСМдЁСННЁСМпЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ░ЁСМ╛ЁСМгЁСМ┐ ЁСМоЁСНВЁСМ░ЁСННЁСМзЁСМиЁСННЁСМпЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ░ЁСМ╛ЁСМгЁСМ┐ ЁСМ╡ЁСМ┐ЁСМ╣ЁСМ╛ЁСМп ЁСМ╡ЁСМ╛ЁСМпЁСНБЁСМХЁСНЛЁСМ╢ЁСНАЁСМпЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ░ЁСМ╛ЁСМгЁСННЁСМпЁСМкЁСМ┐ ЁСМкЁСННЁСМ░ЁСМ╕ЁСМ┐ЁСМжЁСННЁСМзЁСМ╛ЁСМиЁСМ┐ ред ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСМ╕ЁСМоЁСННЁСМмЁСМжЁСННЁСМзЁСНЗЁСМ╖ЁСНБ ЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМиЁСННЁСМдЁСМ░ЁСНЗЁСМ╖ЁСНБ ЁСМпЁСМ╡ЁСМиЁСМ╛ЁСМжЁСМ┐ЁСМ╖ЁСНБ ЁСМоЁСНВЁСМ░ЁСННЁСМзЁСМиЁСННЁСМпЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ░ЁСМ╛ЁСМгЁСМ╛ЁСМоЁСМкЁСННЁСМпЁСМнЁСМ╛ЁСМ╡ЁСМ╛ЁСМдЁСНН ЁСМдЁСМ╛ЁСМиЁСМ┐ ЁСМоЁСНВЁСМ░ЁСННЁСМзЁСМиЁСННЁСМпЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ░ЁСМ╛ЁСМгЁСМ┐ ЁСМиЁСМиЁСНБ ЁСМжЁСННЁСМ░ЁСМ╛ЁСМоЁСМ┐ЁСМбЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМнЁСННЁСМпЁСМГ ЁСМ╕ЁСМВЁСМ╕ЁСННЁСМХЁСНГЁСМдЁСМВ ЁСМкЁСННЁСМ░ЁСМ╡ЁСМ┐ЁСМ╖ЁСННЁСМЯЁСМ╛ЁСМиЁСМ┐ ЁСМ╕ЁСННЁСМпЁСНБЁСМГ ред ЁСМжЁСННЁСМ░ЁСМ╛ЁСМоЁСМ┐ЁСМбЁСМнЁСМ╛ЁСМ╖ЁСМ╛ЁСМгЁСМ╛ЁСМоЁСМзЁСМ┐ЁСМХЁСМ╛ЁСМ░ ЁСМЖЁСМнЁСМ╛ЁСМ░ЁСМдЁСМоЁСМеЁСМ╡ЁСМ╛ ЁСМиЁСННЁСМпЁСНВЁСМиЁСМ╛ЁСМдЁСМ┐ЁСМиЁСННЁСМпЁСНВЁСМиЁСМоЁСМ╛ЁСМжЁСМ╛ЁСМХЁСННЁСМ╖ЁСМ┐ЁСМгЁСМ╛ЁСМдЁСННЁСМпЁСМВ ЁСМ╡ЁСМ░ЁСННЁСМдЁСМдЁСНЗ ЁСМЗЁСМдЁСМ┐ ЁСМ╕ЁСМ╛ЁСМ░ЁСМГ ред
`,
    deva : `
рд▓реЗрдЦреЗрд╖реБ рд╕рдВрд╕реНрдХреГрддрд╛рджрд┐рддрд░рд╛ рднрд╛рд░рддреАрдпрднрд╛рд╖рд╛рдГ тАЬрдкреНрд░рд╛рджреЗрд╢рд┐рдХрднрд╛рд╖рд╛рдГтАЭ тАЬрдкреНрд░рд╛рдиреНрддреАрдпрднрд╛рд╖рд╛рдГтАЭ рдЗрддреНрдпрднрд┐рдзреАрдпрдиреНрддреЗ ред рдЗрддреНрдердВрдкреНрд░рдпреЛрдЧреЗрдг рд▓реЗрдЦрдХрд╕реНрдпреЛрджреНрджреЗрд╢рд╛рд╕реНрддреНрд░рдпреЛ рднрд╛рд╕рдиреНрддреЗ ред рдкреНрд░рдердореЛ рдпрддреН рд╕рдВрд╕реНрдХреГрддрднрд╛рд╖рд╛ рднрд╛рд░рддреАрдпрд╛рдирд╛рдВ рднрд╛рд░рддрджреЗрд╢рд╕реНрдп рдЪ рд░рд╛рд╖реНрдЯреНрд░рднрд╛рд╖рд╛ рдкреВрд░реНрд╡рдорд╛рд╕реАрддреН рд╕рд╛рдореНрдкреНрд░рддрдВ рд╡рд░реНрддрддреЗ рд╢реНрд╡реЛ рд╡рд╛ рднрд╡реЗрддреН ред рдЕрдиреНрдп рдЙрджреНрджреЗрд╢рдГ рд╕рдВрд╕реНрдХреГрддрд╛рджреН рдЗрддрд░рд╛рд╕рд╛рдВ рднрд╛рд╖рд╛рдгрд╛рдореН рдЕрдзрд┐рдХрд╛рд░рдГ рд╕реНрд╡рд╕реНрд╡рдкреНрд░рджреЗрд╢реЗрд╖реНрд╡реЗрд╡реЗрддрд┐ ред рддреГрддреАрдп рдЙрджреНрджреЗрд╢рд╛рд╕реНрддреБ рдЙрдХреНрддрд╛рднреНрдпрд╛рдВ рдХрд╛рд░рдгрд╛рднреНрдпрд╛рдВ рд╕рдВрд╕реНрдХреГрддрднрд╛рд╖рд╛ рднрд╛рд░рддреАрдпрднрд╛рд╖рд╛рд╕реБ рд╕рд░реНрд╡рдкреНрд░рдердорд╛ рдЪреЗрддрд┐ ред

рекрелрддрдорд╕реНрдп рдЕрд╣реЛрдмрд┐рд▓рдордард╛рдзреАрд╢рд╕реНрдп рдзреНрдпрд╛рдирд╢реНрд▓реЛрдХрдГ
рдХрдЯрд╛рдХреНрд╖рдГ рдЕрд╕реНрдп рдЕрд╕реНрддреАрддрд┐ рдЗрдиреНрдирдиреНрддрдВ тАЬрдХрдЯрд╛рдХреНрд╖реАтАЭ ред рд╕рдореНрдмреБрджреНрдзреМ тАЬрди рдЩрд┐рд╕рдореНрдмреБрджреНрдзреМтАЭ рдЗрддреНрдпрдиреЗрди тАЬрдХрдЯрд╛рдХреНрд╖рд┐рдиреНтАЭ ред рджреЗрд╡реНрдпрд╛рдГ рд╕реНрддреНрд░реАрддреНрд╡рд╛рддреН тАЬрдЛрдиреНрдиреЗрднреНрдпреЛ рдЩреАрдкреНтАЭ рдЗрддреНрдпрддрдГ рдгрддреНрд╡рд╛рдЪреНрдЪ тАЬрдХрдЯрд╛рдХреНрд╖рд┐рдгреАтАЭ, рд╕рдореНрдмреБрджреНрдзреМ тАЬрдПрдЩреНрд╣реНрд░рд╕реНрд╡рд╛рддреНрд╕рдореНрдмреБрджреНрдзреЗрдГтАЭ рдЗрддрд┐ рд╣реНрд░рд╕реНрд╡реЗрдХрд╛рд░реЛ рд╡рд┐рд╣рд┐рддрдГ, рддрддрдГ тАЬрдХрдЯрд╛рдХреНрд╖рд┐рдгрд┐тАЭ рдЗрддрд┐ рд╡рд╛рдЪреНрдпрдореН ред рддрдереИрд╡ тАЬрд╕рд╛рдХреНрд╖рд┐рдгрд┐тАЭ ред тЖй

рдЕрдерд╛рдиреНрдпрднрд╛рд╖рд╛рдгрд╛рдордзрд┐рдХрд╛рд░рдГ рд╕реНрд╡рдкреНрд░рджреЗрд╖реНрд╡реЗрд╡реЛрдд рдиреЗрддрд┐ ред рдРрддрд┐рд╣рд╛рд╕рд┐рдХрднрд╛рд╖рд╛рд╢рд╛рд╕реНрддреНрд░реЗ рдирд┐рдкреБрдгрд╛ рдордиреНрд╡рддреЗ рдпрддреН рдкреНрд░рдердорджреНрд░рд╛рдорд┐рдбрднрд╛рд╖рдпрд╛ рдХрдпрд╛рдЪрд┐рджреЗрд╡ рджрд╛рдХреНрд╖рд┐рдгрд╛рддреНрдпреЗ рдкреБрд░рд╛ рд╡реНрдпрд╛рд╣реНрд░рд┐рдпрддреЗ рд╕реНрдо рддрд╕реНрдпрд╛рд╢реНрдЪрдЪреНрдЫрд╛рдпрд╛ рд╕рдВрд╕реНрдХреГрддрдордкрд┐ рдкрддрд┐рддрд╛ ред тАЬрдореАрдитАЭ тАЬрдХреБрдЯреБрдореНрдмтАЭ тАЬрдиреАрд░тАЭ рдЗрддреНрдпрд╛рджрдпрдГ рд╢рдмреНрджрд╛рдГ рдкреНрд░рдердорджреНрд░рд╛рдорд┐рдбрд╛рддреН рд╕рдЩреНрдЧреГрд╣реАрддрд╛ рдЗрддрд┐ рд╕реНрдкрд╖реНрдЯрдВ рдпрддреЛ рджреНрд░рд╛рдорд┐рдбрднрд╛рд╖рд╛рд╕реБ рддрдЪреНрдЫрдмреНрджреИрдГ рд╕рдореНрдмрджреНрдзрд╛рдиреАрддрд░рд╛рдгрд┐ рдкрджрд╛рдиреНрдпрдкрд┐ рдкреНрд░рдпреБрдЬреНрдпрдиреНрддреЗ рдпреЗрд╖рд╛рдВ рд╡реНрдпрд╡рд╣рд╛рд░рдГ рд╕рдВрд╕реНрдХреГрддреЗ рдирд╛рд╕реНрддрд┐ ред рдкреБрдирд╢реНрдЪ рджреНрд░рд╛рдорд┐рдбрднрд╛рд╖рд╛рд╕реБ рдХрддрд┐рдкрдпрд╛рд╕реБ рджрдиреНрддреНрдпрд╛рдХреНрд╖рд░рд╛рдгрд┐ рдореВрд░реНрдзрдиреНрдпрд╛рдХреНрд╖рд░рд╛рдгрд┐ рд╡рд┐рд╣рд╛рдп рд╡рд╛рдпреБрдХреЛрд╢реАрдпрд╛рдХреНрд╖рд░рд╛рдгреНрдпрдкрд┐ рдкреНрд░рд╕рд┐рджреНрдзрд╛рдирд┐ ред рд╕рдВрд╕реНрдХреГрддрд╕рдореНрдмрджреНрдзреЗрд╖реБ рднрд╛рд╖рд╛рдиреНрддрд░реЗрд╖реБ рдпрд╡рдирд╛рджрд┐рд╖реБ рдореВрд░реНрдзрдиреНрдпрд╛рдХреНрд╖рд░рд╛рдгрд╛рдордкреНрдпрднрд╛рд╡рд╛рддреН рддрд╛рдирд┐ рдореВрд░реНрдзрдиреНрдпрд╛рдХреНрд╖рд░рд╛рдгрд┐ рдирдиреБ рджреНрд░рд╛рдорд┐рдбрднрд╛рд╖рд╛рднреНрдпрдГ рд╕рдВрд╕реНрдХреГрддрдВ рдкреНрд░рд╡рд┐рд╖реНрдЯрд╛рдирд┐ рд╕реНрдпреБрдГ ред рджреНрд░рд╛рдорд┐рдбрднрд╛рд╖рд╛рдгрд╛рдордзрд┐рдХрд╛рд░ рдЖрднрд╛рд░рддрдордерд╡рд╛ рдиреНрдпреВрдирд╛рддрд┐рдиреНрдпреВрдирдорд╛рджрд╛рдХреНрд╖рд┐рдгрд╛рддреНрдпрдВ рд╡рд░реНрддрддреЗ рдЗрддрд┐ рд╕рд╛рд░рдГ ред
`,
    latn : `
le╠Дkhe╠Дs╠гu sam╠Зskr╠еta╠Дditara╠Д bha╠Дrati╠Дyabha╠Дs╠гa╠Дh╠г тАЬpra╠Дde╠Дs╠Бikabha╠Дs╠гa╠Дh╠гтАЭ тАЬpra╠Дnti╠Дyabha╠Дs╠гa╠Дh╠гтАЭ ityabhidhi╠Дyante╠Д ред ittham╠Зprayo╠Дge╠Дn╠гa le╠Дkhakasyo╠Дdde╠Дs╠Бa╠Дstrayo╠Д bha╠Дsante╠Д ред prathamo╠Д yat sam╠Зskr╠еtabha╠Дs╠гa╠Д bha╠Дrati╠Дya╠Дna╠Дm╠З bha╠Дratade╠Дs╠Бasya ca ra╠Дs╠гt╠гrabha╠Дs╠гa╠Д pu╠Дrvama╠Дsi╠Дt sa╠Дmpratam╠З vartate╠Д s╠Бvo╠Д va╠Д bhave╠Дt ред anya udde╠Дs╠Бah╠г sam╠Зskr╠еta╠Дd itara╠Дsa╠Дm╠З bha╠Дs╠гa╠Дn╠гa╠Дm adhika╠Дrah╠г svasvaprade╠Дs╠Бe╠Дs╠гve╠Дve╠Дti ред tr╠еti╠Дya udde╠Дs╠Бa╠Дstu ukta╠Дbhya╠Дm╠З ka╠Дran╠гa╠Дbhya╠Дm╠З sam╠Зskr╠еtabha╠Дs╠гa╠Д bha╠Дrati╠Дyabha╠Дs╠гa╠Дsu sarvaprathama╠Д ce╠Дti ред

45tamasya aho╠Дbilamat╠гha╠Дdhi╠Дs╠Бasya dhya╠Дnas╠Бlo╠Дkah╠г
kat╠гa╠Дks╠гah╠г asya asti╠Дti innantam╠З тАЬkat╠гa╠Дks╠гi╠ДтАЭ ред sambuddhau тАЬna n╠ЗisambuddhauтАЭ ityane╠Дna тАЬkat╠гa╠Дks╠гinтАЭ ред de╠Дvya╠Дh╠г stri╠Дtva╠Дt тАЬr╠еnne╠Дbhyo╠Д n╠Зi╠ДpтАЭ ityatah╠г n╠гatva╠Дcca тАЬkat╠гa╠Дks╠гin╠гi╠ДтАЭ, sambuddhau тАЬe╠Дn╠Зhrasva╠Дtsambuddhe╠Дh╠гтАЭ iti hrasve╠Дka╠Дro╠Д vihitah╠г, tatah╠г тАЬkat╠гa╠Дks╠гin╠гiтАЭ iti va╠Дcyam ред tathaiva тАЬsa╠Дks╠гin╠гiтАЭ ред тЖй

atha╠Дnyabha╠Дs╠гa╠Дn╠гa╠Дmadhika╠Дrah╠г svaprade╠Дs╠гve╠Дvo╠Дta ne╠Дti ред aitiha╠Дsikabha╠Дs╠гa╠Дs╠Бa╠Дstre╠Д nipun╠гa╠Д manvate╠Д yat prathamadra╠Дmid╠гabha╠Дs╠гaya╠Д kaya╠Дcide╠Дva da╠Дks╠гin╠гa╠Дtye╠Д pura╠Д vya╠Дhriyate╠Д sma tasya╠Дs╠Бcaccha╠Дya╠Д sam╠Зskr╠еtamapi patita╠Д ред тАЬmi╠ДnaтАЭ тАЬkut╠гumbaтАЭ тАЬni╠ДraтАЭ itya╠Дdayah╠г s╠Бabda╠Дh╠г prathamadra╠Дmid╠гa╠Дt san╠Зgr╠еhi╠Дta╠Д iti spas╠гt╠гam╠З yato╠Д dra╠Дmid╠гabha╠Дs╠гa╠Дsu tacchabdaih╠г sambaddha╠Дni╠Дtara╠Дn╠гi pada╠Дnyapi prayujyante╠Д ye╠Дs╠гa╠Дm╠З vyavaha╠Дrah╠г sam╠Зskr╠еte╠Д na╠Дsti ред punas╠Бca dra╠Дmid╠гabha╠Дs╠гa╠Дsu katipaya╠Дsu dantya╠Дks╠гara╠Дn╠гi mu╠Дrdhanya╠Дks╠гara╠Дn╠гi viha╠Дya va╠Дyuko╠Дs╠Бi╠Дya╠Дks╠гara╠Дn╠гyapi prasiddha╠Дni ред sam╠Зskr╠еtasambaddhe╠Дs╠гu bha╠Дs╠гa╠Дntare╠Дs╠гu yavana╠Дdis╠гu mu╠Дrdhanya╠Дks╠гara╠Дn╠гa╠Дmapyabha╠Дva╠Дt ta╠Дni mu╠Дrdhanya╠Дks╠гara╠Дn╠гi nanu dra╠Дmid╠гabha╠Дs╠гa╠Дbhyah╠г sam╠Зskr╠еtam╠З pravis╠гt╠гa╠Дni syuh╠г ред dra╠Дmid╠гabha╠Дs╠гa╠Дn╠гa╠Дmadhika╠Дra a╠Дbha╠Дratamathava╠Д nyu╠Дna╠Дtinyu╠Дnama╠Дda╠Дks╠гin╠гa╠Дtyam╠З vartate╠Д iti sa╠Дrah╠г ред
`,};

QUnit.test("gran to latn: sa text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        brahmiyaToLatn("gran", granthaTextWithPunctuationAndSpacing.gran),
        granthaTextWithPunctuationAndSpacing.latn);
    });
QUnit.test("latn to gran: sa text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        latnToBrahmiya("gran", granthaTextWithPunctuationAndSpacing.latn),
        granthaTextWithPunctuationAndSpacing.gran);
    });
QUnit.test("gran to deva: sa text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        latnToBrahmiya("deva",
            brahmiyaToLatn("gran", granthaTextWithPunctuationAndSpacing.gran)),
        granthaTextWithPunctuationAndSpacing.deva);
    });
QUnit.test("deva to gran: sa text with punctuation, spacing, etc.", function(assert) {
    assert.deepEqual(
        latnToBrahmiya("gran",
            brahmiyaToLatn("deva", granthaTextWithPunctuationAndSpacing.deva)),
        granthaTextWithPunctuationAndSpacing.gran);
    });

QUnit.module("Invalid inputs");
const invalidTamlText = "роХрпБро▒ро┐рокрпНрокро╛роХ, роЗро╡рпНро╡ро┐родро┐роорпБро▒рпИ рокрпЖропро░рпНроХро│рпБроХрпНроХрпБроорпН рокрпКро░рпБроирпНродрпБроорпН: роЗро░ро╛роороиро╛родрокрпБро░родрпНродрпИроЪрпН роЪрпЗро░рпНроирпНродро╡ро░рпН роЗро░ро╛роороиро╛родрокрпБро░родрпНродрпБроЪрпН роЪрпАройро┐ро╡ро╛роЪ роЕропрпНропроЩрпНроХро╛ро░рпН.";
QUnit.test("Foo", function(assert) {
    assert.throws(
        function() { brahmiyaToLatn("taml", invalidTamlText); },
        RangeError
        );
    });
